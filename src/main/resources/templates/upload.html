<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Upload</title>
    <link rel="stylesheet" th:href="@{/style.css}" />
</head>
<body>
    <h1>MAF-Datei <span>[[ ${upload.filename} ]]</span> vom <span>[[ ${#temporals.format(upload.createdAt, 'dd.MM.YYYY HH:mm:ss', 'Europe/Berlin')} ]]</span></h1>
    <a th:href="@{/}">Zurück zur Hauptseite</a>
    <div th:each="sample : ${samples}">
        <div th:id="'sample_' + ${sample.id}" th:if="not ${sample.simpleVariants.isEmpty()}">
            <h3>
                Einsendenummer: [[ ${sample.tumorSampleBarcode} ]]
                <button class="btn btn-red btn-delete" title="Löschen" th:data-id="${sample.id}" onclick="deleteSample(this.dataset['id'])" style="background: red; color: white">Löschen</button>
            </h3>
            <table>
                <thead>
                <tr>
                    <th></th>
                    <th>Aktiv</th>
                    <th>Letzte Änderung</th>
                    <th>TUMOR_SAMPLE_BARCODE</th>
                    <th>HUGO_SYMBOL</th>
                    <th>CHROMOSOME</th>
                    <th>GENE</th>
                    <th>HGNC-ID</th>
                    <th>Name</th>
                    <th>COSMIC_ID</th>
                    <th>START_POSITION</th>
                    <th>END_POSITION</th>
                    <th>REFERENCE_ALLELE</th>
                    <th>TUMOR_SEQ_ALLELE2</th>
                    <th>HGVSc</th>
                    <th>HGVSp_short</th>
                    <th>t_depth</th>
                    <th>DBSNPRS</th>
                    <th>ALLELIC_FREQUENCY</th>
                    <th>Interpretation</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="simpleVariant : ${sample.simpleVariants}">
                    <td th:if="${simpleVariant.isValid()}" class="bg-green" style="text-align: center">✓</td>
                    <td th:if="not ${simpleVariant.isValid()}" class="bg-yellow" style="text-align: center">⚠</td>
                    <td style="text-align: center"><input type="checkbox" th:checked="${simpleVariant.active}" th:data-id="${simpleVariant.id}" onchange="onChangedActive(this.dataset['id'], this.checked)"></td>
                    <td th:id="'modified_' + ${simpleVariant.id}" class="bg-shaded">[[ ${#temporals.format(simpleVariant.modifiedAt, 'dd.MM.YYYY HH:mm:ss', 'Europe/Berlin')} ]]</td>
                    <td>[[ ${simpleVariant.tumorSampleBarcode} ]]</td>
                    <td>[[ ${simpleVariant.hugoSymbol} ]]</td>
                    <td>[[ ${simpleVariant.chromosome} ]]</td>
                    <td>
                        <a th:href="@{https://www.ensembl.org/Homo_sapiens/Gene/Summary(g=${simpleVariant.gene})}" target="_blank">[[ ${simpleVariant.gene} ]]</a>
                    </td>
                    <td class="bg-shaded">[[ ${simpleVariant.hgncId} ]]</td>
                    <td class="bg-shaded">[[ ${simpleVariant.geneName} ]]</td>
                    <td class="bg-shaded">
                        <a th:href="@{http://cancer.sanger.ac.uk/cosmic/gene/analysis(ln=${simpleVariant.cosmicId})}" target="_blank">[[ ${simpleVariant.cosmicId} ]]</a>
                    </td>
                    <td>[[ ${simpleVariant.startPosition} ]]</td>
                    <td>[[ ${simpleVariant.endPosition} ]]</td>
                    <td>[[ ${simpleVariant.referenceAllele} ]]</td>
                    <td>[[ ${simpleVariant.tumorSeqAllele2} ]]</td>
                    <td>[[ ${simpleVariant.hgvsc} ]]</td>
                    <td>[[ ${simpleVariant.hgvsp} ]]</td>
                    <td>[[ ${simpleVariant.tDepth} ]]</td>
                    <td>[[ ${simpleVariant.dbSnpRs} ]]</td>
                    <td>[[ ${simpleVariant.allelicFrequency} ]]</td>
                    <td><input class="inline" th:value="${simpleVariant.interpretation}" th:data-id="${simpleVariant.id}" onchange="onChangedInterpretation(this.dataset['id'], this.value)" /></td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
    <script th:src="@{/scripts.js}"></script>
</body>
</html>